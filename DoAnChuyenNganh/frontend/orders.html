<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đơn hàng của tôi - Laptop World</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div id="header-container"></div>

    <div class="bg-gradient text-white py-4">
        <div class="container">
            <h1><i class="fas fa-box"></i> Đơn hàng của tôi</h1>
        </div>
    </div>

    <section class="py-5">
        <div class="container">
            <div class="card">
                <div class="card-body p-4">
                    <h4 class="card-title mb-4">
                        <i class="fas fa-shopping-bag"></i> Lịch sử đơn hàng
                    </h4>

                    <div id="ordersContainer">
                        <div class="text-center py-5">
                            <i class="fas fa-spinner fa-spin fa-2x"></i>
                            <p class="mt-2">Đang tải...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div id="footer-container"></div>

    <!-- Order Detail Modal -->
    <div class="modal fade" id="orderDetailModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Chi tiết đơn hàng <span id="modalOrderId"></span></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Ngày đặt:</strong> <span id="modalOrderDate"></span></p>
                            <p class="mb-1"><strong>Trạng thái:</strong> <span id="modalOrderStatus"></span></p>
                        </div>
                        <div class="col-md-6 text-md-end">
                            <p class="mb-1"><strong>Tổng tiền:</strong></p>
                            <h4 class="text-primary mb-0" id="modalOrderTotal"></h4>
                        </div>
                    </div>

                    <h6 class="mb-3">Sản phẩm</h6>
                    <div id="modalOrderItems" class="mb-4"></div>

                    <h6 class="mb-3">Thông tin giao hàng</h6>
                    <div class="bg-light p-3 rounded">
                        <p class="mb-1"><strong>Người nhận:</strong> <span id="modalShippingName"></span></p>
                        <p class="mb-1"><strong>Số điện thoại:</strong> <span id="modalShippingPhone"></span></p>
                        <p class="mb-0"><strong>Địa chỉ:</strong> <span id="modalShippingAddress"></span></p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/api.js"></script>
    <script src="js/main.js"></script>
    <script src="js/components/header.js"></script>
    <script src="js/components/footer.js"></script>
    <script src="js/profile-orders.js"></script>
    <script src="js/chatbot.js"></script>
    <script src="js/components/scroll-to-top.js"></script>

    <script>
        // Check authentication
        const token = localStorage.getItem('token');
        if (!token) {
            alert('Vui lòng đăng nhập để xem đơn hàng');
            window.location.href = 'login.html';
        } else {
            // Load orders when page loads
            document.addEventListener('DOMContentLoaded', function() {
                loadOrders();
            });
        }
    </script>
</body>

</html>
