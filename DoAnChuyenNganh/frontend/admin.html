<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Laptop World</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">

    <style>
        html, body {
            height: 100%;
            margin: 0;
        }

        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        section {
            flex: 1;
        }

        .border-left-primary {
            border-left: 4px solid var(--primary-color);
        }

        .border-left-success {
            border-left: 4px solid #28a745;
        }

        .border-left-info {
            border-left: 4px solid var(--secondary-color);
        }

        .border-left-warning {
            border-left: 4px solid var(--accent-color);
        }

        .text-xs {
            font-size: 0.7rem;
        }
    </style>
</head>

<body>
    <div id="header-container"></div>

    <section class="py-3">
        <div class="container-fluid">
            <!-- Admin Navigation Tabs -->
            <div id="admin-nav-container"></div>

            <!-- Tab Content -->
            <div class="tab-content" id="adminTabsContent">
                <!-- Products Tab -->
                <div class="tab-pane fade show active" id="products" role="tabpanel">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="mb-0">Qu·∫£n l√Ω s·∫£n ph·∫©m</h5>
                                <button class="btn btn-primary" onclick="showAddProductModal()">
                                    <i class="fas fa-plus"></i> Th√™m s·∫£n ph·∫©m
                                </button>
                            </div>

                            <!-- Search and Filters -->
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <input type="text" class="form-control" id="productSearch"
                                        placeholder="T√¨m ki·∫øm t√™n s·∫£n ph·∫©m..."
                                        onkeyup="if(event.key==='Enter') searchProducts()">
                                </div>
                                <div class="col-md-2">
                                    <button class="btn btn-outline-primary w-100" onclick="searchProducts()">
                                        <i class="fas fa-search"></i> T√¨m
                                    </button>
                                </div>
                            </div>

                            <div class="table-responsive">
                                <table class="table table-hover align-middle">
                                    <thead>
                                        <tr>
                                            <th width="60">ID</th>
                                            <th>S·∫£n ph·∫©m</th>
                                            <th>Th∆∞∆°ng hi·ªáu</th>
                                            <th>Gi√°</th>
                                            <th>Kho</th>
                                            <th>Tr·∫°ng th√°i</th>
                                            <th width="120">Thao t√°c</th>
                                        </tr>
                                    </thead>
                                    <tbody id="productsTable">
                                        <tr>
                                            <td colspan="7" class="text-center"><i class="fas fa-spinner fa-spin"></i>
                                                ƒêang t·∫£i...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div id="productsPagination"></div>
                        </div>
                    </div>
                </div>

                <!-- Orders Tab -->
                <div class="tab-pane fade" id="orders" role="tabpanel">
                    <!-- Stats Cards -->
                    <div class="row mb-4">
                        <div class="col-md-3 mb-3">
                            <div class="card border-left-warning shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">Ch·ªù x·ª≠ l√Ω</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800" id="orderStatsChoXuLy">0</div>
                                        </div>
                                        <div class="col-auto"><i class="fas fa-clock fa-2x text-gray-300"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card border-left-info shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">ƒêang giao</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800" id="orderStatsDangGiao">0</div>
                                        </div>
                                        <div class="col-auto"><i class="fas fa-shipping-fast fa-2x text-gray-300"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card border-left-success shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">ƒê√£ giao</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800" id="orderStatsDaGiao">0</div>
                                        </div>
                                        <div class="col-auto"><i class="fas fa-check-circle fa-2x text-gray-300"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card border-left-primary shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">ƒê√£ h·ªßy</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800" id="orderStatsDaHuy">0</div>
                                        </div>
                                        <div class="col-auto"><i class="fas fa-times-circle fa-2x text-gray-300"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-body">
                            <h5 class="mb-4">Qu·∫£n l√Ω ƒë∆°n h√†ng</h5>
                            
                            <!-- Filters -->
                            <div class="row mb-3">
                                <div class="col-md-3">
                                    <select class="form-select" id="orderStatusFilter" onchange="filterOrders()">
                                        <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                                        <option value="Cho xu ly">Ch·ªù x·ª≠ l√Ω</option>
                                        <option value="Xac nhan">ƒê√£ x√°c nh·∫≠n</option>
                                        <option value="Dang giao">ƒêang giao</option>
                                        <option value="Da giao">ƒê√£ giao</option>
                                        <option value="Da huy">ƒê√£ h·ªßy</option>
                                        <option value="HoanTien">Ho√†n ti·ªÅn</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <input type="text" class="form-control" id="orderSearchInput" 
                                        placeholder="T√¨m m√£ ƒë∆°n, kh√°ch h√†ng..." 
                                        onkeyup="if(event.key==='Enter') filterOrders()">
                                </div>
                                <div class="col-md-2">
                                    <button class="btn btn-outline-primary w-100" onclick="filterOrders()">
                                        <i class="fas fa-search"></i> T√¨m
                                    </button>
                                </div>
                            </div>

                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th width="80">M√£ ƒë∆°n</th>
                                            <th>Kh√°ch h√†ng</th>
                                            <th>Ng√†y ƒë·∫∑t</th>
                                            <th>T·ªïng ti·ªÅn</th>
                                            <th>Tr·∫°ng th√°i</th>
                                            <th width="200">Thao t√°c</th>
                                        </tr>
                                    </thead>
                                    <tbody id="ordersTableBody">
                                        <tr>
                                            <td colspan="6" class="text-center"><i class="fas fa-spinner fa-spin"></i> ƒêang t·∫£i...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div id="ordersPagination"></div>
                        </div>
                    </div>
                </div>

                <!-- News Tab -->
                <div class="tab-pane fade" id="news" role="tabpanel">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="mb-0">Qu·∫£n l√Ω tin t·ª©c</h5>
                                <button class="btn btn-primary" onclick="showAddNewsModal()">
                                    <i class="fas fa-plus"></i> Th√™m tin t·ª©c
                                </button>
                            </div>

                            <div class="table-responsive">
                                <table class="table table-hover align-middle">
                                    <thead>
                                        <tr>
                                            <th width="60">ID</th>
                                            <th width="80">·∫¢nh</th>
                                            <th>Danh m·ª•c</th>
                                            <th>T√°c gi·∫£</th>
                                            <th>Th√¥ng tin</th>
                                            <th width="150">Thao t√°c</th>
                                        </tr>
                                    </thead>
                                    <tbody id="newsTableBody">
                                        <tr>
                                            <td colspan="6" class="text-center py-5">
                                                <i class="fas fa-spinner fa-spin fa-2x"></i>
                                                <p class="mt-2">ƒêang t·∫£i...</p>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Users Tab -->
                <div class="tab-pane fade" id="users" role="tabpanel">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="mb-0">Qu·∫£n l√Ω ng∆∞·ªùi d√πng</h5>
                                <button class="btn btn-primary" onclick="showAddUserModal()">
                                    <i class="fas fa-user-plus"></i> Th√™m ng∆∞·ªùi d√πng
                                </button>
                            </div>

                            <!-- Search and Filters -->
                            <div class="row mb-3">
                                <div class="col-md-4">
                                    <input type="text" class="form-control" id="userSearch"
                                        placeholder="T√¨m ki·∫øm t√™n, email, SƒêT..."
                                        onkeyup="if(event.key==='Enter') searchUsers()">
                                </div>
                                <div class="col-md-3">
                                    <select class="form-select" id="roleFilter" onchange="searchUsers()">
                                        <option value="">T·∫•t c·∫£ vai tr√≤</option>
                                        <option value="user">Kh√°ch h√†ng</option>
                                        <option value="admin">Admin</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <select class="form-select" id="statusFilter" onchange="searchUsers()">
                                        <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                                        <option value="1">Ho·∫°t ƒë·ªông</option>
                                        <option value="0">B·ªã kh√≥a</option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <button class="btn btn-outline-primary w-100" onclick="searchUsers()">
                                        <i class="fas fa-search"></i> T√¨m
                                    </button>
                                </div>
                            </div>

                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th width="60">ID</th>
                                            <th>T√™n</th>
                                            <th>Email</th>
                                            <th>ƒêi·ªán tho·∫°i</th>
                                            <th>Vai tr√≤</th>
                                            <th>Tr·∫°ng th√°i</th>
                                            <th>Ng√†y ƒëƒÉng k√Ω</th>
                                            <th width="200">Thao t√°c</th>
                                        </tr>
                                    </thead>
                                    <tbody id="usersTableBody">
                                        <tr>
                                            <td colspan="8" class="text-center"><i class="fas fa-spinner fa-spin"></i>
                                                ƒêang t·∫£i...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div id="usersPagination"></div>
                        </div>
                    </div>
                </div>

                <!-- Flash Sale Tab -->
                <div class="tab-pane fade" id="flashsale" role="tabpanel">
                    <!-- Flash Sale Products -->
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="mb-0">Qu·∫£n l√Ω Flash Sale</h5>
                                <button class="btn btn-primary" onclick="showAddFlashSaleProductModal()">
                                    <i class="fas fa-plus"></i> Th√™m s·∫£n ph·∫©m
                                </button>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th width="80">H√¨nh</th>
                                            <th>S·∫£n ph·∫©m</th>
                                            <th>Gi√° g·ªëc</th>
                                            <th>Gi√° sale</th>
                                            <th>Gi·∫£m</th>
                                            <th>S·ªë l∆∞·ª£ng</th>
                                            <th>ƒê√£ b√°n</th>
                                            <th width="120">Thao t√°c</th>
                                        </tr>
                                    </thead>
                                    <tbody id="flashsaleProductsBody">
                                        <tr>
                                            <td colspan="8" class="text-center">ƒêang t·∫£i...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reviews Tab -->
                <div class="tab-pane fade" id="reviews" role="tabpanel">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="mb-4">Qu·∫£n l√Ω ƒê√°nh gi√°</h5>
                            
                            <!-- Search and Filters -->
                            <div class="row mb-3">
                                <div class="col-md-4">
                                    <input type="text" class="form-control" id="reviewSearch"
                                        placeholder="T√¨m ki·∫øm theo t√™n, n·ªôi dung..."
                                        onkeyup="if(event.key==='Enter') searchReviews()">
                                </div>
                                <div class="col-md-3">
                                    <select class="form-select" id="reviewProductFilter" onchange="searchReviews()">
                                        <option value="">T·∫•t c·∫£ s·∫£n ph·∫©m</option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <button class="btn btn-outline-primary w-100" onclick="searchReviews()">
                                        <i class="fas fa-search"></i> T√¨m
                                    </button>
                                </div>
                            </div>

                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th width="60">ID</th>
                                            <th>Ng∆∞·ªùi d√πng</th>
                                            <th>S·∫£n ph·∫©m</th>
                                            <th>ƒê√°nh gi√°</th>
                                            <th>N·ªôi dung</th>
                                            <th>Ng√†y t·∫°o</th>
                                            <th width="150">Thao t√°c</th>
                                        </tr>
                                    </thead>
                                    <tbody id="reviewsTableBody">
                                        <tr>
                                            <td colspan="7" class="text-center"><i class="fas fa-spinner fa-spin"></i> ƒêang t·∫£i...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div id="reviewsPagination"></div>
                        </div>
                    </div>
                </div>

                <!-- Contacts Tab -->
                <div class="tab-pane fade" id="contacts" role="tabpanel">
                    <!-- Stats Cards -->
                    <div class="row mb-4">
                        <div class="col-md-4 mb-3">
                            <div class="card border-left-primary shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">T·ªïng li√™n h·ªá</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800" id="contactStatsTotal">0</div>
                                        </div>
                                        <div class="col-auto"><i class="fas fa-envelope fa-2x text-gray-300"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="card border-left-warning shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">Ch∆∞a ƒë·ªçc</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800" id="contactStatsNew">0</div>
                                        </div>
                                        <div class="col-auto"><i class="fas fa-exclamation-circle fa-2x text-gray-300"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="card border-left-success shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">ƒê√£ tr·∫£ l·ªùi</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800" id="contactStatsReplied">0</div>
                                        </div>
                                        <div class="col-auto"><i class="fas fa-check-circle fa-2x text-gray-300"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-body">
                            <h5 class="mb-4">Qu·∫£n l√Ω Li√™n h·ªá</h5>
                            
                            <!-- Filters -->
                            <div class="row mb-3">
                                <div class="col-md-3">
                                    <select class="form-select" id="contactStatusFilter" onchange="filterContacts()">
                                        <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                                        <option value="Moi">M·ªõi</option>
                                        <option value="Da Doc">ƒê√£ ƒë·ªçc</option>
                                        <option value="Da tra loi">ƒê√£ tr·∫£ l·ªùi</option>
                                    </select>
                                </div>
                            </div>

                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th width="60">ID</th>
                                            <th>Ng∆∞·ªùi g·ª≠i</th>
                                            <th>SƒêT</th>
                                            <th>Ch·ªß ƒë·ªÅ</th>
                                            <th>N·ªôi dung</th>
                                            <th>Tr·∫°ng th√°i</th>
                                            <th>Ng√†y g·ª≠i</th>
                                            <th width="150">Thao t√°c</th>
                                        </tr>
                                    </thead>
                                    <tbody id="contactsTableBody">
                                        <tr>
                                            <td colspan="8" class="text-center"><i class="fas fa-spinner fa-spin"></i> ƒêang t·∫£i...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div id="contactsPagination"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div id="footer-container"></div>

    <!-- User Add/Edit Modal -->
    <div class="modal fade" id="userModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="userModalTitle">Th√™m Ng∆∞·ªùi D√πng</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <form id="userForm" onsubmit="saveUser(event)">
                    <div class="modal-body">
                        <input type="hidden" id="userId">
                        <div class="mb-3">
                            <label for="userName" class="form-label">H·ªç t√™n *</label>
                            <input type="text" class="form-control" id="userName" required>
                        </div>
                        <div class="mb-3">
                            <label for="userEmail" class="form-label">Email *</label>
                            <input type="email" class="form-control" id="userEmail" required>
                        </div>
                        <div class="mb-3">
                            <label for="userPhone" class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
                            <input type="tel" class="form-control" id="userPhone">
                        </div>
                        <div class="mb-3" id="userPasswordGroup">
                            <label for="userPassword" class="form-label">M·∫≠t kh·∫©u *</label>
                            <input type="password" class="form-control" id="userPassword" required minlength="6">
                            <div class="form-text">T·ªëi thi·ªÉu 6 k√Ω t·ª±</div>
                        </div>
                        <div class="mb-3">
                            <label for="userRole" class="form-label">Vai tr√≤</label>
                            <select class="form-select" id="userRole">
                                <option value="user">Kh√°ch h√†ng</option>
                                <option value="admin">Admin</option>
                            </select>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="userStatus" checked>
                            <label class="form-check-label" for="userStatus">K√≠ch ho·∫°t t√†i kho·∫£n</label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                        <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> L∆∞u</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- User Detail Modal -->
    <div class="modal fade" id="userDetailModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Chi Ti·∫øt Ng∆∞·ªùi D√πng</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Th√¥ng tin c√° nh√¢n</h6>
                            <table class="table table-sm">
                                <tr>
                                    <th width="120">H·ªç t√™n:</th>
                                    <td id="detailUserName"></td>
                                </tr>
                                <tr>
                                    <th>Email:</th>
                                    <td id="detailUserEmail"></td>
                                </tr>
                                <tr>
                                    <th>ƒêi·ªán tho·∫°i:</th>
                                    <td id="detailUserPhone"></td>
                                </tr>
                                <tr>
                                    <th>Vai tr√≤:</th>
                                    <td id="detailUserRole"></td>
                                </tr>
                                <tr>
                                    <th>Tr·∫°ng th√°i:</th>
                                    <td id="detailUserStatus"></td>
                                </tr>
                                <tr>
                                    <th>Ng√†y t·∫°o:</th>
                                    <td id="detailUserCreated"></td>
                                </tr>
                                <tr>
                                    <th>C·∫≠p nh·∫≠t:</th>
                                    <td id="detailUserUpdated"></td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-md-6">
                            <h6>Th·ªëng k√™ ho·∫°t ƒë·ªông</h6>
                            <div class="card mb-2">
                                <div class="card-body">
                                    <h3 id="detailTotalOrders" class="text-primary mb-0">0</h3><small
                                        class="text-muted">T·ªïng ƒë∆°n h√†ng</small>
                                </div>
                            </div>
                            <div class="card mb-2">
                                <div class="card-body">
                                    <h3 id="detailTotalSpent" class="text-success mb-0">0ƒë</h3><small
                                        class="text-muted">T·ªïng chi ti√™u</small>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-body">
                                    <h3 id="detailTotalReviews" class="text-warning mb-0">0</h3><small
                                        class="text-muted">ƒê√°nh gi√° ƒë√£ vi·∫øt</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Reset Password Modal -->
    <div class="modal fade" id="resetPasswordModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">ƒê·∫∑t l·∫°i m·∫≠t kh·∫©u</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <form onsubmit="resetUserPassword(event)">
                    <div class="modal-body">
                        <input type="hidden" id="resetPasswordUserId">
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle"></i> ƒê·∫∑t l·∫°i m·∫≠t kh·∫©u cho: <strong id="resetPasswordUserName"></strong>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">M·∫≠t kh·∫©u m·ªõi</label>
                            <input type="password" class="form-control" id="newPassword" required minlength="6">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">X√°c nh·∫≠n m·∫≠t kh·∫©u</label>
                            <input type="password" class="form-control" id="confirmNewPassword" required minlength="6">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                        <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> L∆∞u</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Product Add/Edit Modal -->
    <div class="modal fade" id="productModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="productModalTitle">Th√™m S·∫£n Ph·∫©m</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <form id="productForm" onsubmit="saveProduct(event)">
                    <div class="modal-body">
                        <input type="hidden" id="productId">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="mb-3">
                                    <label for="productName" class="form-label">T√™n s·∫£n ph·∫©m *</label>
                                    <input type="text" class="form-control" id="productName" required>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="productStatus" class="form-label">Tr·∫°ng th√°i</label>
                                    <select class="form-select" id="productStatus">
                                        <option value="DangBan">ƒêang b√°n</option>
                                        <option value="NgungBan">Ng·ª´ng b√°n</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="productCategory" class="form-label">Danh m·ª•c</label>
                                    <select class="form-select" id="productCategory">
                                        <option value="">-- Ch·ªçn danh m·ª•c --</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="productBrand" class="form-label">Th∆∞∆°ng hi·ªáu</label>
                                    <select class="form-select" id="productBrand">
                                        <option value="">-- Ch·ªçn th∆∞∆°ng hi·ªáu --</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="productPrice" class="form-label">Gi√° (VNƒê) *</label>
                                    <input type="number" class="form-control" id="productPrice" required min="0">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="productQuantity" class="form-label">S·ªë l∆∞·ª£ng kho</label>
                                    <input type="number" class="form-control" id="productQuantity" value="0" min="0">
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="productImages" class="form-label">H√¨nh ·∫£nh s·∫£n ph·∫©m (Ch·ªçn nhi·ªÅu ·∫£nh)</label>
                            <input type="file" class="form-control" id="productImages" accept="image/*" multiple
                                onchange="previewProductImages(this)">
                            <div class="form-text">Ch·∫•p nh·∫≠n: JPG, PNG, GIF, WEBP (t·ªëi ƒëa 5MB/·∫£nh). ·∫¢nh ƒë·∫ßu ti√™n s·∫Ω l√† ·∫£nh ch√≠nh.</div>
                            <div id="imagesPreview" class="mt-2 d-flex flex-wrap gap-2"></div>
                        </div>
                        <div class="mb-3">
                            <label for="productDesc" class="form-label">M√¥ t·∫£ s·∫£n ph·∫©m</label>
                            <textarea class="form-control" id="productDesc" rows="4"></textarea>
                        </div>

                        <!-- Technical Specifications -->
                        <h6 class="mt-4 mb-3 text-primary"><i class="fas fa-cogs"></i> Th√¥ng s·ªë k·ªπ thu·∫≠t</h6>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="productStorage" class="form-label">Ki·ªÉu ·ªï c·ª©ng</label>
                                    <select class="form-select" id="productStorage">
                                        <option value="">-- Ch·ªçn ki·ªÉu ·ªï c·ª©ng --</option>
                                        <option value="SSD">SSD</option>
                                        <option value="HDD">HDD</option>
                                        <option value="SSD + HDD">SSD + HDD</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="productStorageSize" class="form-label">Dung l∆∞·ª£ng ·ªï c·ª©ng</label>
                                    <select class="form-select" id="productStorageSize">
                                        <option value="">-- Ch·ªçn dung l∆∞·ª£ng --</option>
                                        <option value="128GB">128GB</option>
                                        <option value="256GB">256GB</option>
                                        <option value="512GB">512GB</option>
                                        <option value="1TB">1TB</option>
                                        <option value="2TB">2TB</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="productScreenTech" class="form-label">C√¥ng ngh·ªá m√†n h√¨nh</label>
                                    <select class="form-select" id="productScreenTech">
                                        <option value="">-- Ch·ªçn c√¥ng ngh·ªá --</option>
                                        <option value="IPS">IPS</option>
                                        <option value="OLED">OLED</option>
                                        <option value="TN">TN</option>
                                        <option value="VA">VA</option>
                                        <option value="Retina">Retina</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="productRefreshRate" class="form-label">T·∫ßn s·ªë qu√©t</label>
                                    <select class="form-select" id="productRefreshRate">
                                        <option value="">-- Ch·ªçn t·∫ßn s·ªë --</option>
                                        <option value="60Hz">60Hz</option>
                                        <option value="90Hz">90Hz</option>
                                        <option value="120Hz">120Hz</option>
                                        <option value="144Hz">144Hz</option>
                                        <option value="165Hz">165Hz</option>
                                        <option value="240Hz">240Hz</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="productResolution" class="form-label">ƒê·ªô ph√¢n gi·∫£i</label>
                                    <select class="form-select" id="productResolution">
                                        <option value="">-- Ch·ªçn ƒë·ªô ph√¢n gi·∫£i --</option>
                                        <option value="HD (1366x768)">HD (1366x768)</option>
                                        <option value="FHD (1920x1080)">FHD (1920x1080)</option>
                                        <option value="2K (2560x1440)">2K (2560x1440)</option>
                                        <option value="4K (3840x2160)">4K (3840x2160)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="productBattery" class="form-label">Pin</label>
                                    <select class="form-select" id="productBattery">
                                        <option value="">-- Ch·ªçn dung l∆∞·ª£ng pin --</option>
                                        <option value="40Wh">40Wh</option>
                                        <option value="50Wh">50Wh</option>
                                        <option value="60Wh">60Wh</option>
                                        <option value="70Wh">70Wh</option>
                                        <option value="80Wh">80Wh</option>
                                        <option value="90Wh">90Wh</option>
                                        <option value="100Wh">100Wh</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="productOrigin" class="form-label">Xu·∫•t x·ª©</label>
                                    <select class="form-select" id="productOrigin">
                                        <option value="">-- Ch·ªçn xu·∫•t x·ª© --</option>
                                        <option value="Trung Qu·ªëc">Trung Qu·ªëc</option>
                                        <option value="Vi·ªát Nam">Vi·ªát Nam</option>
                                        <option value="Th√°i Lan">Th√°i Lan</option>
                                        <option value="USA">USA</option>
                                        <option value="ƒê√†i Loan">ƒê√†i Loan</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="productWeight" class="form-label">Tr·ªçng l∆∞·ª£ng</label>
                                    <select class="form-select" id="productWeight">
                                        <option value="">-- Ch·ªçn tr·ªçng l∆∞·ª£ng --</option>
                                        <option value="< 1.5kg">< 1.5kg</option>
                                        <option value="1.5 - 2.0kg">1.5 - 2.0kg</option>
                                        <option value="2.0 - 2.5kg">2.0 - 2.5kg</option>
                                        <option value="> 2.5kg">> 2.5kg</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                        <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> L∆∞u</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- News Add/Edit Modal -->
    <div class="modal fade" id="newsModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="newsModalTitle">Th√™m tin t·ª©c m·ªõi</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <form id="newsForm" onsubmit="submitNewsForm(event)">
                    <div class="modal-body">
                        <input type="hidden" id="newsId">
                        
                        <div class="mb-3">
                            <label class="form-label">Danh m·ª•c <span class="text-danger">*</span></label>
                            <select class="form-select" id="newsDanhMuc" required>
                                <option value="">-- Ch·ªçn danh m·ª•c --</option>
                                <option value="SƒÉn Sale">üî• SƒÉn Sale</option>
                                <option value="H√†ng M·ªõi">‚ú® H√†ng M·ªõi</option>
                                <option value="Gi·∫£m Gi√°">üí∞ Gi·∫£m Gi√°</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">N·ªôi dung <span class="text-danger">*</span></label>
                            <textarea class="form-control" id="newsNoiDung" rows="10" required 
                                minlength="10" placeholder="Nh·∫≠p n·ªôi dung tin t·ª©c"></textarea>
                            <div class="form-text">T·ªëi thi·ªÉu 10 k√Ω t·ª±</div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">·∫¢nh b√¨a</label>
                            <input type="file" class="form-control" id="newsAnhBia" accept="image/*">
                            <div class="form-text">Ch·∫•p nh·∫≠n: JPG, PNG, GIF, WEBP. T·ªëi ƒëa 5MB</div>
                            <div id="currentImage" class="mt-2" style="display: none;"></div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> L∆∞u
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Flash Sale Product Modal -->
    <div class="modal fade" id="flashsaleProductModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="fsProductModalTitle">Th√™m s·∫£n ph·∫©m Flash Sale</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <form id="fsProductForm" onsubmit="saveFlashSaleProduct(event)">
                    <div class="modal-body">
                        <input type="hidden" id="fsProductId">
                        
                        <!-- Brand Filter -->
                        <div class="mb-3">
                            <label class="form-label">L·ªçc theo h√£ng</label>
                            <select class="form-select" id="fsBrandFilter" onchange="filterProductsByBrand()">
                                <option value="">-- T·∫•t c·∫£ h√£ng --</option>
                            </select>
                            <div class="form-text">Ch·ªçn h√£ng ƒë·ªÉ l·ªçc s·∫£n ph·∫©m b√™n d∆∞·ªõi</div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Ch·ªçn s·∫£n ph·∫©m *</label>
                            <select class="form-select" id="fsProductSelect" required>
                                <option value="">-- Ch·ªçn s·∫£n ph·∫©m --</option>
                            </select>
                            <div class="form-text" id="fsProductCount"></div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Gi√° g·ªëc</label>
                            <input type="text" class="form-control" id="fsOriginalPrice" readonly>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Gi√° Flash Sale *</label>
                            <input type="number" class="form-control" id="fsSalePrice" required min="1000">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">S·ªë l∆∞·ª£ng gi·ªõi h·∫°n *</label>
                            <input type="number" class="form-control" id="fsQuantity" value="10" required min="1">
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Ng√†y b·∫Øt ƒë·∫ßu *</label>
                                <input type="datetime-local" class="form-control" id="fsStartDate" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Ng√†y k·∫øt th√∫c *</label>
                                <input type="datetime-local" class="form-control" id="fsEndDate" required>
                            </div>
                        </div>
                        <div class="alert alert-info small mb-0">
                            <i class="fas fa-info-circle"></i> Flash Sale ch·ªâ hi·ªÉn th·ªã ·ªü trang ch·ªß trong kho·∫£ng th·ªùi gian n√†y. N·∫øu kh√¥ng c√≥ s·∫£n ph·∫©m flash sale ho·∫∑c h·∫øt th·ªùi gian, ph·∫ßn flash sale s·∫Ω t·ª± ƒë·ªông ·∫©n.
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                        <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> L∆∞u</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Admin Reply Modal -->
    <div class="modal fade" id="adminReplyModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Tr·∫£ l·ªùi b√¨nh lu·∫≠n</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <form id="adminReplyForm" onsubmit="submitAdminReply(event)">
                    <div class="modal-body">
                        <input type="hidden" id="adminReplyReviewId">
                        <div class="mb-3">
                            <label class="form-label">B√¨nh lu·∫≠n g·ªëc:</label>
                            <div class="alert alert-secondary" id="adminReplyOriginal"></div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">N·ªôi dung tr·∫£ l·ªùi *</label>
                            <textarea class="form-control" id="adminReplyContent" rows="4" required></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                        <button type="submit" class="btn btn-primary"><i class="fas fa-reply"></i> G·ª≠i tr·∫£ l·ªùi</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- View Contact Modal -->
    <div class="modal fade" id="viewContactModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Chi ti·∫øt li√™n h·ªá</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="viewContactContent">
                    <p class="text-center"><i class="fas fa-spinner fa-spin"></i> ƒêang t·∫£i...</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Reply Contact Modal -->
    <div class="modal fade" id="replyContactModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Ph·∫£n h·ªìi li√™n h·ªá</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <form onsubmit="submitReply(event)">
                    <div class="modal-body">
                        <input type="hidden" id="replyContactId">
                        <div class="alert alert-info" id="replyContactInfo"></div>
                        <div class="mb-3">
                            <label class="form-label">N·ªôi dung ph·∫£n h·ªìi * <span class="text-muted small">(T·ªëi ƒëa 100 t·ª´)</span></label>
                            <textarea class="form-control" id="replyContent" rows="5" required placeholder="Nh·∫≠p n·ªôi dung ph·∫£n h·ªìi..." oninput="countReplyWords(this)"></textarea>
                            <div class="form-text">
                                <span id="replyWordCount">0</span>/100 t·ª´
                                <span id="replyWordCountWarning" class="text-danger ms-2" style="display:none;">‚ö†Ô∏è V∆∞·ª£t qu√° gi·ªõi h·∫°n!</span>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                        <button type="submit" class="btn btn-primary"><i class="fas fa-reply"></i> G·ª≠i ph·∫£n h·ªìi</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Order Detail Modal -->
    <div class="modal fade" id="orderDetailModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Chi ti·∫øt ƒë∆°n h√†ng</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="orderDetailContent">
                    <p class="text-center"><i class="fas fa-spinner fa-spin"></i> ƒêang t·∫£i...</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Update Order Status Modal -->
    <div class="modal fade" id="updateOrderStatusModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">C·∫≠p nh·∫≠t tr·∫°ng th√°i ƒë∆°n h√†ng</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <form onsubmit="submitUpdateOrderStatus(event)">
                    <div class="modal-body">
                        <input type="hidden" id="updateOrderId">
                        <div class="alert alert-info" id="updateOrderInfo"></div>
                        <div class="mb-3">
                            <label class="form-label">Tr·∫°ng th√°i m·ªõi *</label>
                            <select class="form-select" id="updateOrderStatus" required>
                                <option value="">-- Ch·ªçn tr·∫°ng th√°i --</option>
                                <option value="Cho xu ly">Ch·ªù x·ª≠ l√Ω</option>
                                <option value="Xac nhan">ƒê√£ x√°c nh·∫≠n</option>
                                <option value="Dang giao">ƒêang giao</option>
                                <option value="Da giao">ƒê√£ giao</option>
                                <option value="Da huy">ƒê√£ h·ªßy</option>
                                <option value="HoanTien">Ho√†n ti·ªÅn</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                        <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> C·∫≠p nh·∫≠t</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/api.js"></script>
    <script src="js/main.js"></script>
    <script src="js/components/header.js"></script>
    <script src="js/components/footer.js"></script>
    <script src="js/chatbot.js"></script>
    <script src="js/admin-users.js"></script>
    <script src="js/admin-products.js"></script>
    <script src="js/admin-orders.js"></script>
    <script src="js/admin-news.js"></script>
    <script src="js/admin-flashsale.js"></script>
    <script src="js/admin-reviews.js"></script>
    <script src="js/admin-contacts.js"></script>
    <script src="js/admin-init.js"></script>

    <script>
        // Check admin access on page load
        document.addEventListener('DOMContentLoaded', function () {
            const token = localStorage.getItem('token');
            const userStr = localStorage.getItem('user');

            if (!token || !userStr) {
                alert('Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ truy c·∫≠p trang qu·∫£n tr·ªã');
                window.location.href = 'login.html';
                return;
            }

            const user = JSON.parse(userStr);
            if (user.vaiTro !== 'admin') {
                alert('B·∫°n kh√¥ng c√≥ quy·ªÅn truy c·∫≠p trang n√†y. Ch·ªâ admin m·ªõi c√≥ quy·ªÅn.');
                window.location.href = 'index.html';
                return;
            }

            // Load admin navigation component
            fetch('admin-nav.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('admin-nav-container').innerHTML = data;
                    
                    // Load admin nav script after component is loaded
                    const script = document.createElement('script');
                    script.src = 'js/admin-nav.js';
                    document.body.appendChild(script);
                    
                    // Initialize reviews tab after nav is loaded
                    setTimeout(() => {
                        if (window.initReviewsTab) {
                            window.initReviewsTab();
                        }
                    }, 500);
                })
                .catch(err => console.error('Failed to load admin nav:', err));
        });
    </script>

  <!-- Scroll to Top Button -->
  <script src="js/components/scroll-to-top.js"></script>
</body>

</html>