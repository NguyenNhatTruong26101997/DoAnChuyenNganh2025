<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="Laptop World - C·ª≠a h√†ng laptop ch√≠nh h√£ng, gi√° t·ªët nh·∫•t. Chuy√™n Dell, HP, Asus, Lenovo, MSI, Acer.">
  <meta name="keywords" content="laptop, laptop gaming, laptop vƒÉn ph√≤ng, laptop gi√° r·∫ª, Dell, HP, Asus">
  <title>Laptop World - C·ª≠a h√†ng laptop uy t√≠n s·ªë 1 Vi·ªát Nam</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <!-- Header Container -->
  <div id="header-container"></div>

  <!-- Hero Section -->
  <section class="hero-section">
    <div class="container">
      <div class="row align-items-center hero-content">
        <div class="col-lg-6">
          <h1 class="hero-title">Laptop Ch·∫•t L∆∞·ª£ng<br>Gi√° T·ªët Nh·∫•t</h1>
          <p class="hero-subtitle">Kh√°m ph√° b·ªô s∆∞u t·∫≠p laptop hi·ªán ƒë·∫°i t·ª´ c√°c th∆∞∆°ng hi·ªáu h√†ng ƒë·∫ßu th·∫ø gi·ªõi. Cam k·∫øt
            ch√≠nh h√£ng 100%, b·∫£o h√†nh t·∫≠n t√¢m.</p>
        </div>
        <div class="col-lg-6 text-center d-none d-lg-block">
          <div style="width: 400px; height: 300px; margin: 0 auto; position: relative; display: flex; align-items: center; justify-content: center;">
            <!-- Globe emoji behind -->
            <div style="position: absolute; font-size: 180px; animation: floatGlobe 3s ease-in-out infinite; filter: drop-shadow(0 10px 40px rgba(0,100,255,0.5));">üåç</div>
            <!-- Laptop in front -->
            <i class="fas fa-laptop" style="position: relative; z-index: 2; font-size: 90px; color: white; filter: drop-shadow(0 8px 25px rgba(0,0,0,0.4)); margin-top: 30px;"></i>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Flash Sale Section - FPT Shop Style -->
  <section class="flash-sale-section" id="flashSaleSection" style="display: none;">
    <div class="container py-4">
      <!-- Flash Sale Header -->
      <div class="flash-sale-header d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3">
        <div class="d-flex align-items-center gap-3">
          <div class="flash-sale-logo">
            <i class="fas fa-bolt"></i>
            <span>FLASH SALE</span>
          </div>
          <div class="flash-sale-countdown d-flex align-items-center gap-1">
            <span class="countdown-label">K·∫øt th√∫c trong</span>
            <div class="countdown-box" id="hours">00</div>
            <span class="countdown-sep">:</span>
            <div class="countdown-box" id="minutes">00</div>
            <span class="countdown-sep">:</span>
            <div class="countdown-box" id="seconds">00</div>
          </div>
        </div>
        <a href="#" class="flash-sale-viewall">Xem t·∫•t c·∫£ <i class="fas fa-chevron-right"></i></a>
      </div>
      
      <!-- Flash Sale Products Slider -->
      <div class="flash-sale-slider position-relative">
        <button class="flash-sale-nav flash-sale-prev" onclick="slideFlashSale(-1)">
          <i class="fas fa-chevron-left"></i>
        </button>
        <div class="flash-sale-products" id="flashSaleProductsGrid">
          <!-- Products loaded by JS -->
        </div>
        <button class="flash-sale-nav flash-sale-next" onclick="slideFlashSale(1)">
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="py-5 features-section">
    <div class="container">
      <div class="row g-4">
        <div class="col-md-3 col-sm-6">
          <div class="feature-card text-center p-4">
            <div class="feature-icon mb-3">
              <i class="fas fa-shipping-fast fa-3x"></i>
            </div>
            <h5>Giao h√†ng nhanh</h5>
            <p class="text-muted">Giao h√†ng to√†n qu·ªëc 1-3 ng√†y</p>
          </div>
        </div>
        <div class="col-md-3 col-sm-6">
          <div class="feature-card text-center p-4">
            <div class="feature-icon mb-3">
              <i class="fas fa-shield-alt fa-3x"></i>
            </div>
            <h5>B·∫£o h√†nh uy t√≠n</h5>
            <p class="text-muted">B·∫£o h√†nh ch√≠nh h√£ng 12-24 th√°ng</p>
          </div>
        </div>
        <div class="col-md-3 col-sm-6">
          <div class="feature-card text-center p-4">
            <div class="feature-icon mb-3">
              <i class="fas fa-tag fa-3x"></i>
            </div>
            <h5>Gi√° c·∫£ c·∫°nh tranh</h5>
            <p class="text-muted">Cam k·∫øt gi√° t·ªët nh·∫•t th·ªã tr∆∞·ªùng</p>
          </div>
        </div>
        <div class="col-md-3 col-sm-6">
          <div class="feature-card text-center p-4">
            <div class="feature-icon mb-3">
              <i class="fas fa-headset fa-3x"></i>
            </div>
            <h5>H·ªó tr·ª£ 24/7</h5>
            <p class="text-muted">T∆∞ v·∫•n nhi·ªát t√¨nh, chuy√™n nghi·ªáp</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Products Section -->
  <section class="py-5 featured-section" id="featured">
    <div class="container">
      <div class="text-center mb-5">
        <h2 class="text-gradient">S·∫£n Ph·∫©m N·ªïi B·∫≠t</h2>
        <p class="text-muted">C√°c m·∫´u laptop ƒë∆∞·ª£c y√™u th√≠ch nh·∫•t</p>
      </div>

      <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4" id="featuredProducts"></div>
        <!-- Products will be loaded here by JavaScript -->
      </div>

      <div class="text-center mt-5">
        <a href="products.html" class="btn btn-primary btn-lg">
          Xem t·∫•t c·∫£ s·∫£n ph·∫©m <i class="fas fa-arrow-right ms-2"></i>
        </a>
      </div>
    </div>
  </section>

  <!-- Categories Section -->


  <!-- Testimonials Section -->
  <section class="py-5 testimonials-section"></section>
    <div class="container">
      <div class="text-center mb-5">
        <h2 class="text-gradient">Kh√°ch H√†ng N√≥i G√¨</h2>
        <p class="text-muted">ƒê√°nh gi√° t·ª´ kh√°ch h√†ng ƒë√£ mua s·∫Øm t·∫°i Laptop World</p>
      </div>

      <div class="row g-4">
        <div class="col-md-4">
          <div class="card h-100">
            <div class="card-body">
              <div class="mb-3">
                <i class="fas fa-star" style="color: #ffc107;"></i>
                <i class="fas fa-star" style="color: #ffc107;"></i>
                <i class="fas fa-star" style="color: #ffc107;"></i>
                <i class="fas fa-star" style="color: #ffc107;"></i>
                <i class="fas fa-star" style="color: #ffc107;"></i>
              </div>
              <p class="mb-3">"Laptop ch·∫•t l∆∞·ª£ng tuy·ªát v·ªùi, gi√° r·∫•t h·ª£p l√Ω. Nh√¢n vi√™n t∆∞ v·∫•n nhi·ªát t√¨nh v√† chuy√™n
                nghi·ªáp. T√¥i r·∫•t h√†i l√≤ng!"</p>
              <div class="d-flex align-items-center">
                <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3"
                  style="width: 50px; height: 50px;">
                  <strong>NH</strong>
                </div>
                <div>
                  <strong>Nguy·ªÖn Ho√†ng</strong>
                  <div class="text-muted small">Kh√°ch h√†ng th√¢n thi·∫øt</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <div class="card h-100">
            <div class="card-body">
              <div class="mb-3">
                <i class="fas fa-star" style="color: #ffc107;"></i>
                <i class="fas fa-star" style="color: #ffc107;"></i>
                <i class="fas fa-star" style="color: #ffc107;"></i>
                <i class="fas fa-star" style="color: #ffc107;"></i>
                <i class="fas fa-star" style="color: #ffc107;"></i>
              </div>
              <p class="mb-3">"Giao h√†ng nhanh, s·∫£n ph·∫©m ƒë√≥ng g√≥i c·∫©n th·∫≠n. Laptop ch·∫°y m∆∞·ª£t m√†, ƒë√∫ng nh∆∞ m√¥ t·∫£. S·∫Ω ·ªßng
                h·ªô l√¢u d√†i!"</p>
              <div class="d-flex align-items-center">
                <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3"
                  style="width: 50px; height: 50px;">
                  <strong>TA</strong>
                </div>
                <div>
                  <strong>Tr·∫ßn Anh</strong>
                  <div class="text-muted small">Kh√°ch h√†ng m·ªõi</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <div class="card h-100">
            <div class="card-body">
              <div class="mb-3">
                <i class="fas fa-star" style="color: #ffc107;"></i>
                <i class="fas fa-star" style="color: #ffc107;"></i>
                <i class="fas fa-star" style="color: #ffc107;"></i>
                <i class="fas fa-star" style="color: #ffc107;"></i>
                <i class="fas fa-star" style="color: #ffc107;"></i>
              </div>
              <p class="mb-3">"Mua laptop gaming ·ªü ƒë√¢y gi√° t·ªët h∆°n nhi·ªÅu n∆°i kh√°c. Sau b√°n h√†ng chu ƒë√°o, b·∫£o h√†nh t·ªët.
                R·∫•t recommend!"</p>
              <div class="d-flex align-items-center">
                <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3"
                  style="width: 50px; height: 50px;">
                  <strong>LM</strong>
                </div>
                <div>
                  <strong>L√™ Minh</strong>
                  <div class="text-muted small">Game th·ªß</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer Container -->
  <div id="footer-container"></div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Custom JS -->
  <script src="js/api.js"></script>
  <script src="js/main.js"></script>
  <script src="js/components/header.js"></script>
  <script src="js/components/footer.js"></script>
  <script src="js/cart-api.js"></script>
  <script src="js/chatbot.js"></script>
  <script src="js/flashsale.js"></script>

  <!-- Page-specific JS -->
  <script>
    // Load featured products from API
    document.addEventListener('DOMContentLoaded', async function () {
      const featuredContainer = document.getElementById('featuredProducts');
      featuredContainer.innerHTML = '<div class="col-12 text-center"><i class="fas fa-spinner fa-spin fa-2x"></i></div>';
      
      try {
        const response = await fetch('http://localhost:3000/api/products?limit=6');
        const result = await response.json();
        
        if (result.success && result.data.products) {
          featuredContainer.innerHTML = '';
          const products = result.data.products.map(p => ({
            id: p.IdSanPham,
            name: p.TenSanPham,
            brand: p.TenThuongHieu || 'Kh√¥ng r√µ',
            price: p.GiaSanPham,
            oldPrice: p.GiaGoc,
            image: p.AnhChinh,
            description: p.MoTaSanPham || 'Ch∆∞a c√≥ m√¥ t·∫£',
            rating: 4.5,
            badge: p.GiaGoc && p.GiaGoc > p.GiaSanPham ? 'sale' : null
          }));
          
          products.forEach(product => {
            const productCard = createProductCard(product);
            featuredContainer.appendChild(productCard);
          });
        } else {
          featuredContainer.innerHTML = '<div class="col-12 text-center text-muted">Kh√¥ng c√≥ s·∫£n ph·∫©m</div>';
        }
      } catch (error) {
        console.error('Load products error:', error);
        featuredContainer.innerHTML = '<div class="col-12 text-center text-danger">Kh√¥ng th·ªÉ k·∫øt n·ªëi ƒë·∫øn server</div>';
      }
    });

    // Placeholder image as data URI
    const PLACEHOLDER_IMAGE = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIEltYWdlPC90ZXh0Pjwvc3ZnPg==';

    // Get proper image URL
    function getImageUrl(imagePath) {
      if (!imagePath) return PLACEHOLDER_IMAGE;
      if (imagePath.startsWith('data:')) return imagePath;
      if (imagePath.startsWith('http')) return imagePath;
      if (imagePath.startsWith('/uploads')) return 'http://localhost:3000' + imagePath;
      if (imagePath.includes('product-')) return 'http://localhost:3000/uploads/products/' + imagePath;
      return imagePath;
    }

    // Create product card
    function createProductCard(product) {
      const col = document.createElement('div');
      col.className = 'col';

      const badge = product.badge ? `<div class="badge badge-${product.badge === 'sale' ? 'sale' : 'new'}">${product.badge === 'sale' ? 'SALE' : 'M·ªöI'}</div>` : '';

      const imageUrl = getImageUrl(product.image);
      
      // Truncate description to 60 chars
      const shortDesc = product.description ? (product.description.length > 60 ? product.description.substring(0, 60) + '...' : product.description) : 'Laptop ch√≠nh h√£ng';

      col.innerHTML = `
        <div class="card product-card h-100">
          ${badge}
          <img src="${imageUrl}" class="card-img-top" alt="${product.name}" onerror="this.onerror=null; this.src='${PLACEHOLDER_IMAGE}'">
          <div class="card-body">
            <div class="product-brand">${product.brand}</div>
            <h5 class="card-title">${product.name}</h5>
            <div class="product-specs">
              <small><i class="fas fa-microchip text-primary"></i> ${shortDesc}</small>
            </div>
            <div class="product-rating">
              ${generateStars(product.rating)}
              <span class="text-muted small">(${product.rating})</span>
            </div>
            <div class="product-price-section">
              <div class="product-price text-danger fw-bold fs-5">${formatCurrency(product.price)}</div>
              ${product.oldPrice ? `<small class="text-muted text-decoration-line-through">${formatCurrency(product.oldPrice)}</small>` : ''}
            </div>
          </div>
          <div class="card-footer bg-transparent border-0 p-3 pt-0">
            <div class="d-grid gap-2">
              <a href="product-detail.html?id=${product.id}" class="btn btn-outline-primary btn-sm">
                <i class="fas fa-info-circle"></i> Chi ti·∫øt
              </a>
              <button class="btn btn-primary btn-sm" onclick="addToCart(${JSON.stringify(product).replace(/"/g, '&quot;')})">
                <i class="fas fa-cart-plus"></i> Th√™m v√†o gi·ªè
              </button>
            </div>
          </div>
        </div>
      `;

      return col;
    }

    // Generate star rating
    function generateStars(rating) {
      let stars = '';
      const fullStars = Math.floor(rating);
      const hasHalfStar = rating % 1 !== 0;

      for (let i = 0; i < fullStars; i++) {
        stars += '<i class="fas fa-star" style="color: #ffc107;"></i>';
      }

      if (hasHalfStar) {
        stars += '<i class="fas fa-star-half-alt" style="color: #ffc107;"></i>';
      }

      const emptyStars = 5 - Math.ceil(rating);
      for (let i = 0; i < emptyStars; i++) {
        stars += '<i class="far fa-star" style="color: #ffc107;"></i>';
      }

      return stars;
    }
  </script>

  <!-- Scroll to Top Button -->
  <script src="js/components/scroll-to-top.js"></script>
</body>

</html>